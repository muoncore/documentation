<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Muon Java</title>
  <meta name="description" content="The jekyll-asciidoc gem has now been released and is available for download at RubyGems. Get it now, and add the richness of AsciiDoc markup to your Jekyll s...">

  <link rel="stylesheet" href="/css/foundation.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/fontello.css">
  <link rel="stylesheet" href="/css/font-awesome.css">
  <script src="/javascripts/modernizr.foundation.js" type="text/javascript"></script>
    <script src="/javascripts/jquery-2.1.0.js" type="text/javascript"></script>
    <script src="/javascripts/terrific-1.1.1.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.url.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.cookie.js" type="text/javascript"></script>
    <script src="/javascripts/json2.js" type="text/javascript"></script>
    <script src="/javascripts/foundation.js" type="text/javascript"></script>
  <script>
    // terrificjs bootstrap
    (function($) {
        $(document).ready(function() {
            var $page = $('body');
            var config = {
              dependencyPath: {
                plugin: 'javascripts/'
              }
            }
            var application = new Tc.Application($page, config);
            application.registerModules();
            application.start();
        });
    })(Tc.$);
  </script>
  <link href="http://fonts.googleapis.com/css?family=Raleway:400,700,300" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/masonry.pkgd.js" type="text/javascript"></script>
  <script src="/javascripts/imagesloaded.pkgd.min.js" type="text/javascript"></script>
  <script src="/javascripts/slick.min.js" type="text/javascript"></script>
  <link rel="stylesheet" href="/css/asciidoc.css">
  <link rel="canonical" href="/java/SNAPSHOT/">
  <link rel="alternate" type="application/rss+xml" title="Muon - Microservice UX" href="/feed.xml" />

</head>


  <body>
    
      <a id='top'></a>
<div class='contain-to-grid sticky fullwidth'>
  <nav class='top-bar onepage' data-options='sticky_on: large' data-topbar=''>
    <ul class='title-area'>
      <li class='name'>
        <h1>
          <a href="/">
            <img alt="" src="/images/muonfulllogo-sm.jpg" />
          </a>
        </h1>
      </li>
      <li class='toggle-topbar menu-icon'>
        <a href='#'>Menu</a>
      </li>
    </ul>
    <section class='top-bar-section'>
      <ul class='right'>
        
          
            <li>
              
                <a href="/#top">Home</a>
              

            </li>
          
        
          
            <li>
              
                <a href="/#whymuon">Why Muon</a>
              

            </li>
          
        
          
            <li>
              
                <a href="/#ecosystem">Ecosystem</a>
              

            </li>
          
        
          
            <li>
              
                <a href="/#gettingstarted">Getting Started</a>
              

            </li>
          
        
          
            <li class="has-dropdown">
              <a href="/languages.html">Muon Documentation</a>
              <ul class='dropdown'>
                
                  <li>
                    <a href="/java/SNAPSHOT/">Muon - Java</a>
                  </li>
                
                  <li>
                    <a href="/clojure/SNAPSHOT">Muon - Clojure</a>
                  </li>
                
                  <li>
                    <a href="/node/latest">Muon - Node.JS</a>
                  </li>
                
                  <li>
                    <a href="/node/latest">Muon - JavaScript/ Browser</a>
                  </li>
                
                  <li>
                    <a href="/implementmuon.html">&#x2B; your Language</a>
                  </li>
                
              </ul>
            </li>
          
        
          
            <li>
              
                <a href="/https://github.com/microserviceux">Github</a>
              

            </li>
          
        
      </ul>
    </section>
  </nav>
</div>
    


    <div id='main' role='main'>
      <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#a-microservice-based-system-in-5-minutes">A Microservice based system in 5 minutes</a></li>
<li><a href="#core-features">Core Features</a>
<ul class="sectlevel2">
<li><a href="#reactive-rpc">Reactive RPC</a></li>
<li><a href="#reactive-streams">Reactive Streams</a></li>
<li><a href="#event-sourcing">Event Sourcing</a></li>
<li><a href="#event-based-testing">Event Based Testing</a></li>
<li><a href="#wiretap">Wiretap</a></li>
</ul>
</li>
<li><a href="#spring-support">Spring Support</a>
<ul class="sectlevel2">
<li><a href="#create-an-new-muon-spring-boot-microservice">Create an new Muon Spring Boot Microservice</a></li>
<li><a href="#provide-an-rpc-endpoint">Provide an RPC endpoint</a></li>
<li><a href="#create-a-spring-repository">Create a Spring Repository</a></li>
<li><a href="#subscribe-to-a-remote-stream">Subscribe to a Remote Stream</a></li>
<li><a href="#obtain-the-muon-object">Obtain the Muon object</a></li>
</ul>
</li>
<li><a href="#extending-muon-java">Extending Muon Java</a>
<ul class="sectlevel2">
<li><a href="#encoding">Encoding</a></li>
<li><a href="#transports">Transports</a></li>
<li><a href="#adding-a-new-interaction-protocol">Adding a new interaction protocol</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Muon Java is the implementation of the Muon microservices toolkit, for the Java platform. Muon enables you to easily build<br>
microservices in many languages that have richer, more performant and fully reactive communication semantics and gain access<br>
to Muon compatible services written in other languages without having to sacrifice the rich semantics or performance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a-microservice-based-system-in-5-minutes">A Microservice based system in 5 minutes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The quickest way to start a new Muon Java Microservice is to use <em>Spring Boot</em> and the <em>Spring CLI</em>. You can see deeper information<br>
later in this guide.</p>
</div>
<div class="paragraph">
<p>You can install this by following the instructions at spring.io or using <em>SDK Man</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>curl -s get.sdkman.io | bash
source "$HOME/.sdkman/bin/sdkman-init.sh"

sdk install springboot</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then create a new Spring Boot based application as a Groovy script.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-k">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-s">/main/</span><span class="tok-n">groovy</span><span class="tok-s">/io/</span><span class="tok-n">muoncore</span><span class="tok-s">/example/</span><span class="tok-n">user</span><span class="tok-o">/</span><span class="tok-n">UserService</span><span class="tok-o">.</span><span class="tok-na">groovy</span><span class="tok-o">[</span><span class="tok-n">lines</span><span class="tok-o">=</span><span class="tok-mi">17</span><span class="tok-o">..</span><span class="tok-mi">32</span><span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Use Spring Boot annotations to start up a Muon instance.</p>
</li>
<li>
<p>Declare that this class has Muon operations to discover</p>
</li>
<li>
<p>Declare an RPC endpoint (see RPC).</p>
</li>
<li>
<p>Send data back to the client, in this case including the current process identifier.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here, we have configured a full muon service that makes available a single endpoint using the RPC <em>protocol</em>.  This protocol gives<br>
an easy way to make a request and wait until a single response is received. Next, you can create another microservice<br>
that exposes this to the outside world.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-k">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-s">/main/</span><span class="tok-n">groovy</span><span class="tok-s">/io/</span><span class="tok-n">muoncore</span><span class="tok-s">/example/</span><span class="tok-n">gateway</span><span class="tok-o">/</span><span class="tok-n">Gateway</span><span class="tok-o">.</span><span class="tok-na">groovy</span><span class="tok-o">[</span><span class="tok-n">lines</span><span class="tok-o">=</span><span class="tok-mi">18</span><span class="tok-o">..</span><span class="tok-mi">36</span><span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Gain access to the <em>muon</em> instance that has been created.</p>
</li>
<li>
<p>Configure Spring MVC to listen on an HTTP endpoint</p>
</li>
<li>
<p>Use the muon instance to make an RPC call</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here, we have used Spring MVC, configured again via Spring Boot. This gives an easy way to start up an HTTP container<br>
and make it accessible. When you call <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a> you will receive an http response. The body of that response<br>
will be created from the data supplied by the UserService Microservice.</p>
</div>
<div class="paragraph">
<p>You have successfully built a distributed system, congratulations!</p>
</div>
<div class="paragraph">
<p>These will run in production, as independent services and require no underlying platform or runtime.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="core-features">Core Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="reactive-rpc">Reactive RPC</h3>
<div class="paragraph">
<p>Request/ Response is a well understood communication style where you make a single request and expect to receive a single resonse</p>
</div>
<div class="paragraph">
<p>Muon supports this style of communication, over it&#8217;s naturally scalable reactive and event based channel communication.</p>
</div>
<div class="sect3">
<h4 id="simple-rpc">Simple RPC</h4>
<div class="paragraph">
<p>Here is the simplest possible Muon RPC endpoint. It accepts any data pushed to it, and responsds with a simple text message</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">ReactiveRPC</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The client for this looks like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">ReactiveRPC</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Response object contains meta data about the reponse, if it succeeded.</p>
</div>
</div>
<div class="sect3">
<h4 id="making-it-reactive">Making it Reactive</h4>
<div class="paragraph">
<p>The handler does not need to response synchronously as in the above example. The response can be invoked from any context, and by any thread.</p>
</div>
<div class="paragraph">
<p>This will cause an event to flow back down the channel and complete the request/ response cycle.</p>
</div>
<div class="paragraph">
<p>An example of this in action is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">ReactiveRPCAsync</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This demonstrates adding the requests onto a queue and processing them asynchronously.</p>
</div>
<div class="paragraph">
<p>Be aware that the request will time out on both the client and server side, depending on your configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="batch-handling-rpc">Batch handling RPC</h4>
<div class="paragraph">
<p>A common failure of RPC based systems is that they attempt to perform too much work in concurrently, and in logical isolation.<br>
This then ends up causing thread thrashing, overwhelming of the thread pool or overload on some backing data store.</p>
</div>
<div class="paragraph">
<p>Taking the above mechanism to it&#8217;s logical conclusion, it becomes trivial to batch up the processing of request.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">ReactiveRPCBatch</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This example will, every 5 seconds, drain the queue, generate a single answer and send it to all of them.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reactive-streams">Reactive Streams</h3>
<div class="paragraph">
<p>Muon is built to enable the creation of streams easily. Internally everything is treated as a <em>channel</em>, a naturally streaming<br>
construction.</p>
</div>
<div class="paragraph">
<p>This is best accessed via the Reactive Streams API, a cross industry effort to standardise streaming communication with back pressure.</p>
</div>
<div class="paragraph">
<p>To publish a new stream, create a <em>Publisher</em> and pass it into the publishStream method, giving it a name, and the semantics of the stream.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">ReactiveStreams</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we use <em>Spring Reactor</em> to demonstrate the creation of a Publisher, however any Reactive Streams compatible framework or library could<br>
be used.</p>
</div>
<div class="paragraph">
<p>To access the data from another service, use the subscribe method, passing in the logical Muon discovery url.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">ReactiveStreams</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, this example uses Java and shows two separate services communicating using a reactive message stream, with back pressure support<br>
managed by Reactor.</p>
</div>
</div>
<div class="sect2">
<h3 id="event-sourcing">Event Sourcing</h3>
<div class="paragraph">
<p>TODO, link core event sourcing docs.</p>
</div>
<div class="paragraph">
<p>Apart from the recommended event store, Photon, Muon Java provides an in memory, simplified event store that only implements<br>
 the core ingest and stream functionality of a muon compatible event store. You can read more about it <a href="InMemEventStore.html">here</a></p>
</div>
<div class="paragraph">
<p>This is most useful during building tests.</p>
</div>
</div>
<div class="sect2">
<h3 id="event-based-testing">Event Based Testing</h3>
<div class="paragraph">
<p>If you adopt the Event system (which requires an event store such as <em>Photon</em>), then you will design your system domains<br>
as a set of <em>Events</em>, and your business processes as a set of causal relationships between them.</p>
</div>
</div>
<div class="sect2">
<h3 id="wiretap">Wiretap</h3>
<div class="paragraph">
<p>The transport subsystem of Muon injects a WiretapChannel into every connection that is made. This allows you to optionally<br>
read the messages moving in and out of the transport and further interpret them. The messages themselves are immutable,<br>
and so you recieve the message itself for processing.</p>
</div>
<div class="paragraph">
<p>Ordinarily, this is used to record the way a service communicates with the rest of the distributed application. This<br>
is particularly useful when designing and building a new communication protocol.</p>
</div>
<div class="paragraph">
<p>Image a service with a single RPC endpoint that accepts an undefined object data structure, which represent using a Map.<br>
 It then responds inline wth the number 42. A very simple service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">Wiretap</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[</span><span class="tok-n">tags</span><span class="tok-o">=</span><span class="tok-n">setupRPC</span><span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We would like to generate a list of all the services that are calling this one, without altering the business method.</p>
</div>
<div class="paragraph">
<p>We could implement this using a wiretap, this will extract a stream of all the requests that match a particular filter.<br>
The stream interface provided implements the Reactive Stream interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">Wiretap</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[</span><span class="tok-n">tags</span><span class="tok-o">=</span><span class="tok-n">wiretap</span><span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The services that have connected to this one via the RPC endpont.</p>
</li>
<li>
<p>A Spring Reactor Broadcaster, converting the messages into the list.</p>
</li>
<li>
<p>Adding the tap into the Muon transport subsystem</p>
</li>
<li>
<p>The filter matches for the EventType field on the TransportMessage, picking out particular messages.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Whenever you then perform an RPC communication, the Request <code><code>TransportMessage</code></code> events will be selected by your wiretap<br>
 and passed into the Subscriber, in this case the Reactor Broadcaster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">Wiretap</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[</span><span class="tok-n">tags</span><span class="tok-o">=</span><span class="tok-n">fireRPC</span><span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As many wiretaps as you like can be active. You may add another Wiretap later on to select the Response messages, and it will then begin<br>
to receive all the messages required.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">Wiretap</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[</span><span class="tok-n">tags</span><span class="tok-o">=</span><span class="tok-n">wiretap2</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-support">Spring Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Muon Java does not require Spring Core to run, however it does have a set of integrations for Spring and in particular, Spring Boot.</p>
</div>
<div class="sect2">
<h3 id="create-an-new-muon-spring-boot-microservice">Create an new Muon Spring Boot Microservice</h3>
<div class="paragraph">
<p>To create a new Muon Spring Boot Microservice, you need to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">springexample</span><span class="tok-o">/</span><span class="tok-n">AutowireMuon</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[</span><span class="tok-n">tags</span><span class="tok-o">=</span><span class="tok-n">autowire</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="provide-an-rpc-endpoint">Provide an RPC endpoint</h3>

</div>
<div class="sect2">
<h3 id="create-a-spring-repository">Create a Spring Repository</h3>

</div>
<div class="sect2">
<h3 id="subscribe-to-a-remote-stream">Subscribe to a Remote Stream</h3>

</div>
<div class="sect2">
<h3 id="obtain-the-muon-object">Obtain the Muon object</h3>
<div class="paragraph">
<p>Currently, not all features of Muon are fully exposed in the spring support.</p>
</div>
<div class="paragraph">
<p>You can obtain the current Muon instance that has been automatically created via a simple @Autowire and then perform<br>
any of the actions you find in the rest of the documentation on it.</p>
</div>
<div class="paragraph">
<p>Here is an example of this, combined with a @PostConstruct to allow a wiretap to be set up.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Unresolved</span> <span class="tok-n">directive</span> <span class="tok-n">in</span> <span class="tok-o">&lt;</span><span class="tok-n">stdin</span><span class="tok-o">&gt;</span> <span class="tok-o">-</span> <span class="tok-nl">include:</span><span class="tok-o">:</span><span class="tok-n">src</span><span class="tok-o">/</span><span class="tok-n">main</span><span class="tok-o">/</span><span class="tok-n">java</span><span class="tok-o">/</span><span class="tok-n">io</span><span class="tok-o">/</span><span class="tok-n">muoncore</span><span class="tok-o">/</span><span class="tok-n">example</span><span class="tok-o">/</span><span class="tok-n">springexample</span><span class="tok-o">/</span><span class="tok-n">AutowireMuon</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">[</span><span class="tok-n">tags</span><span class="tok-o">=</span><span class="tok-n">autowire</span><span class="tok-o">]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="extending-muon-java">Extending Muon Java</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In common with all Muon libraries, Muon Java is a restricted implementation of Communicating Sequential Processes.<br>
Extension then mostly involves creating and exposing various combinations of processes and channels.</p>
</div>
<div class="sect2">
<h3 id="encoding">Encoding</h3>

</div>
<div class="sect2">
<h3 id="transports">Transports</h3>

</div>
<div class="sect2">
<h3 id="adding-a-new-interaction-protocol">Adding a new interaction protocol</h3>
<div class="paragraph">
<p>Before reading on, many systems won&#8217;t need to do this. The baked in protocols (RPC, Streaming etc) are generally good enough<br>
in most circumstances. If you do have a specific need to control the way your services interact in a more granular way then read on!</p>
</div>
<div class="paragraph">
<p>To implement a new protocol, you need to define the API(s) that you want to provide to your users, define the event interchange<br>
that will need to happen to communicate that between services, and then create the processes need to bring those events to life.</p>
</div>
<div class="paragraph">
<p>This guide focuses on how to implement this in Muon-Java. For a fuller discussion on event protocols, see the main guide.</p>
</div>
<div class="paragraph">
<p>TODO, link to main guide on protocols</p>
</div>
<div class="sect3">
<h4 id="designing-a-protocol">Designing a Protocol</h4>

</div>
<div class="sect3">
<h4 id="client-side">Client Side</h4>
<div class="sect4">
<h5 id="designing-building-a-muon-client-process">Designing Building a Muon Client Process</h5>

</div>
<div class="sect4">
<h5 id="designing-the-user-api-and-protocol-stack">Designing the User API and Protocol Stack</h5>

</div>
</div>
<div class="sect3">
<h4 id="server-side">Server Side</h4>
<div class="sect4">
<h5 id="designing-building-a-muon-server-process">Designing Building a Muon Server Process</h5>

</div>
<div class="sect4">
<h5 id="registering-the-serverstack">Registering the ServerStack</h5>

</div>
</div>
</div>
</div>
</div>
    </div>

    <div class='full no-padding' style='background: #111'>
  <div class='two spacing'></div>
  <div class='row'>
    <div class='large-12 columns' style="color:white;">
      <p>©2016 Muon - Microservice UX. All rights reserved.</p>
    </div>
  </div>
  <div class='spacing'></div>
</div>


<script src="/javascripts/jquery.countTo.js" type="text/javascript"></script>
<script src="/javascripts/jquery.appear.js" type="text/javascript"></script>
<script src="/javascripts/jquery.validate.js" type="text/javascript"></script>
<script src="/javascripts/jquery.sequence-min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="/javascripts/app.js" type="text/javascript"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75338923-1', 'auto');
  ga('require', 'linkid');
  ga('send', 'pageview');

</script>


  </body>

</html>
